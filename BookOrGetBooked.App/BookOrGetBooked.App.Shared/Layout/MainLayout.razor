@using BookOrGetBooked.App.Shared.Interfaces
@inherits LayoutComponentBase
@inject IAuthService AuthService

@code {
    private bool hasFlushedTokens;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && !hasFlushedTokens)
        {
            if (AuthService is IFlushableAuthService flushable)
            {
                await flushable.FlushTokenQueueAsync();
            }

            hasFlushedTokens = true;
        }
    }
}

<div class="main">
    @Body
</div>
