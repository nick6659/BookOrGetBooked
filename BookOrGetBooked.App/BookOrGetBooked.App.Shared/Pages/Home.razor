@attribute [Authorize]
@page "/home"
@using BookOrGetBooked.App.Shared.Interfaces
@using Microsoft.AspNetCore.Authorization
@inject IAuthService AuthService
@inject NavigationManager Navigation

<PageTitle>Home</PageTitle>

<div class="home-container">
    <div class="home-header">
        <h1>Welcome!</h1>

        <div class="home-actions">
            <button class="action-button" @onclick="GoToBook">BOOK</button>
            <span class="or-text">or</span>
            <button class="action-button" @onclick="GoToGetBooked">GET BOOKED</button>
        </div>

        <div class="home-links">
            <button class="profile-button" @onclick="GoToProfile">My Profile</button>
            <button class="logout-button" @onclick="HandleLogout">Logout</button>
        </div>
    </div>
</div>

@code {
    private void GoToBook() => Navigation.NavigateTo("/book");
    private void GoToGetBooked() => Navigation.NavigateTo("/get-booked");
    private void GoToProfile() => Navigation.NavigateTo("/profile");

    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/login", forceLoad: true);
    }
}
